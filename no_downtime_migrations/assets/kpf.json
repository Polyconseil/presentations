{"slideHeight":768,
"filename":"no-downtime-migrations.key",
"navigatorEvents":[{"eventName":"Slide 1",
"eventIndex":0}
,{"eventName":"Slide 2",
"eventIndex":1}
,{"eventName":"Slide 3",
"eventIndex":2}
,{"eventName":"Slide 4",
"eventIndex":3}
,{"eventName":"Slide 5",
"eventIndex":4}
,{"eventName":"Slide 6",
"eventIndex":5}
,{"eventName":"Slide 7",
"eventIndex":6}
,{"eventName":"Slide 8",
"eventIndex":7}
,{"eventName":"Slide 9",
"eventIndex":8}
,{"eventName":"Slide 10",
"eventIndex":9}
,{"eventName":"Slide 11",
"eventIndex":10}
,{"eventName":"Slide 12",
"eventIndex":11}
,{"eventName":"Slide 13",
"eventIndex":12}
,{"eventName":"Slide 14",
"eventIndex":13}
,{"eventName":"Slide 15",
"eventIndex":14}
,{"eventName":"Slide 16",
"eventIndex":15}
,{"eventName":"Slide 17",
"eventIndex":16}
,{"eventName":"Slide 18",
"eventIndex":17}
,{"eventName":"Slide 19",
"eventIndex":18}
,{"eventName":"Slide 20",
"eventIndex":19}
,{"eventName":"Slide 21",
"eventIndex":20}
,{"eventName":"Slide 22",
"eventIndex":21}
,{"eventName":"Slide 23",
"eventIndex":22}
,{"eventName":"Slide 24",
"eventIndex":23}
]
,
"textures":{"s15.b":{"url":"images-1/s15.b.jpeg",
"width":1024,
"height":768}
,
"s6.a":{"url":"images-1/s5.b.jpeg",
"width":1024,
"height":768}
,
"s12.a":{"url":"images-1/s11.b.jpeg",
"width":1024,
"height":768}
,
"s18.a":{"url":"images-1/s17.b.jpeg",
"width":1024,
"height":768}
,
"s2.b":{"url":"images-1/s2.b.jpeg",
"width":1024,
"height":768}
,
"s22.b":{"url":"images-1/s22.b.jpeg",
"width":1024,
"height":768}
,
"thumbnail":{"url":"images-1/thumbnail.jpeg",
"width":458,
"height":344}
,
"s8.a":{"url":"images-1/s7.b.jpeg",
"width":1024,
"height":768}
,
"s4.b":{"url":"images-1/s4.b.jpeg",
"width":1024,
"height":768}
,
"s14.b":{"url":"images-1/s14.b.jpeg",
"width":1024,
"height":768}
,
"s17.a":{"url":"images-1/s16.b.jpeg",
"width":1024,
"height":768}
,
"s11.a":{"url":"images-1/s10.b.jpeg",
"width":1024,
"height":768}
,
"s21.b":{"url":"images-1/s21.b.jpeg",
"width":1024,
"height":768}
,
"s6.b":{"url":"images-1/s6.b.jpeg",
"width":1024,
"height":768}
,
"s1.a":{"url":"images-1/s1.a.jpeg",
"width":1024,
"height":768}
,
"s24.a":{"url":"images-1/s23.b.jpeg",
"width":1024,
"height":768}
,
"s19.b":{"url":"images-1/s19.b.jpeg",
"width":1024,
"height":768}
,
"s13.b":{"url":"images-1/s13.b.jpeg",
"width":1024,
"height":768}
,
"s8.b":{"url":"images-1/s8.b.jpeg",
"width":1024,
"height":768}
,
"s10.a":{"url":"images-1/s9.b.jpeg",
"width":1024,
"height":768}
,
"s3.a":{"url":"images-1/s2.b.jpeg",
"width":1024,
"height":768}
,
"s16.a":{"url":"images-1/s15.b.jpeg",
"width":1024,
"height":768}
,
"s20.b":{"url":"images-1/s20.b.jpeg",
"width":1024,
"height":768}
,
"s23.a":{"url":"images-1/s22.b.jpeg",
"width":1024,
"height":768}
,
"s5.a":{"url":"images-1/s4.b.jpeg",
"width":1024,
"height":768}
,
"s18.b":{"url":"images-1/s18.b.jpeg",
"width":1024,
"height":768}
,
"s12.b":{"url":"images-1/s12.b.jpeg",
"width":1024,
"height":768}
,
"s1.b":{"url":"images-1/s1.b.jpeg",
"width":1024,
"height":768}
,
"s15.a":{"url":"images-1/s14.b.jpeg",
"width":1024,
"height":768}
,
"s7.a":{"url":"images-1/s6.b.jpeg",
"width":1024,
"height":768}
,
"s22.a":{"url":"images-1/s21.b.jpeg",
"width":1024,
"height":768}
,
"s3.b":{"url":"images-1/s3.b.jpeg",
"width":1024,
"height":768}
,
"s17.b":{"url":"images-1/s17.b.jpeg",
"width":1024,
"height":768}
,
"s11.b":{"url":"images-1/s11.b.jpeg",
"width":1024,
"height":768}
,
"s9.a":{"url":"images-1/s8.b.jpeg",
"width":1024,
"height":768}
,
"s14.a":{"url":"images-1/s13.b.jpeg",
"width":1024,
"height":768}
,
"s5.b":{"url":"images-1/s5.b.jpeg",
"width":1024,
"height":768}
,
"s24.b":{"url":"images-1/s24.b.png",
"width":1024,
"height":768}
,
"s21.a":{"url":"images-1/s20.b.jpeg",
"width":1024,
"height":768}
,
"s7.b":{"url":"images-1/s7.b.jpeg",
"width":1024,
"height":768}
,
"s2.a":{"url":"images-1/s1.b.jpeg",
"width":1024,
"height":768}
,
"s10.b":{"url":"images-1/s10.b.jpeg",
"width":1024,
"height":768}
,
"s16.b":{"url":"images-1/s16.b.jpeg",
"width":1024,
"height":768}
,
"s13.a":{"url":"images-1/s12.b.jpeg",
"width":1024,
"height":768}
,
"s19.a":{"url":"images-1/s18.b.jpeg",
"width":1024,
"height":768}
,
"s23.b":{"url":"images-1/s23.b.jpeg",
"width":1024,
"height":768}
,
"s9.b":{"url":"images-1/s9.b.jpeg",
"width":1024,
"height":768}
,
"s4.a":{"url":"images-1/s3.b.jpeg",
"width":1024,
"height":768}
,
"s20.a":{"url":"images-1/s19.b.jpeg",
"width":1024,
"height":768}
}
,
"title":"no-downtime-migrations.key",
"minorVersion":4,
"timestamp":"2013-06-24 11:20:40",
"slideWidth":1024,
"eventTimelines":[{"note":"slide-1",
"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s1.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s1.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s1.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s1.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s1.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s1.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":287,
"width":586,
"x":219,
"height":77}
,
"text":"Migrez, y’a rien à voir"}
,{"targetRectangle":{"y":412,
"width":787,
"x":123,
"height":92}
,
"text":"Ou comment faire évoluer le modèle de données d’un système sans interruption de service"}
]
}
,{"note":"slide-2",
"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s2.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s2.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s2.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s2.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s2.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s2.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":400,
"x":312,
"height":77}
,
"text":"Problématique"}
,{"targetRectangle":{"y":256,
"width":514,
"x":471.988,
"height":238}
,
"text":"Interruptions inacceptables :\n Forte affluence à toute heure\n Engagement QOS\n Image de marque\n"}
]
}
,{"note":"slide-3",
"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s3.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s3.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s3.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s3.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s3.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s3.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":262,
"x":381,
"height":77}
,
"text":"Les outils"}
,{"targetRectangle":{"y":560,
"width":859,
"x":36.0614,
"height":54}
,
"text":"... mais les concepts sont généralisables"}
]
}
,{"note":"slide-4",
"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s4.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s4.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s4.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s4.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s4.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s4.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":241,
"width":694,
"x":156,
"height":76}
,
"text":"Définition des modèles via des classes Python"}
,{"targetRectangle":{"y":317,
"width":655,
"x":156,
"height":43}
,
"text":"Requêtes SQL générées par l’ORM Django"}
,{"targetRectangle":{"y":424,
"width":760.3594,
"x":100,
"height":128}
,
"text":"class Customer(models.Model):\n    \"\"\"A customer account\"\"\"\n    first_name = models.CharField(max_length=30)\n    last_name = models.CharField(max_length=30)"}
]
}
,{"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s5.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s5.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s5.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s5.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s5.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s5.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":246,
"width":684,
"x":156,
"height":119}
,
"text":"Génération automatique de migrations (modification de modèles, ajout d’index, etc.)"}
,{"targetRectangle":{"y":365,
"width":400,
"x":156,
"height":76}
,
"text":"Une migration = un fichier"}
,{"targetRectangle":{"y":441,
"width":750,
"x":156,
"height":119}
,
"text":"Chaque migration est jouée dans une transaction SQL (garantit l’atomicité)"}
,{"targetRectangle":{"y":560,
"width":698,
"x":156,
"height":86}
,
"text":"South trace l’historique des migrations jouées dans une table dédiée"}
]
}
,{"note":"slide-6",
"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s6.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s6.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s6.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s6.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s6.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s6.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":432,
"x":296,
"height":77}
,
"text":"Premier modèle"}
,{"targetRectangle":{"y":288.5,
"width":725,
"x":100,
"height":189}
,
"text":"class Subscription(models.Model):\n    \"\"\"A subscription used by a customer\"\"\"\n    customer = models.ForeignKey(Customer)\n    start_date = models.DateField()\n    end_date = models.DateTimeField()\n"}
,{"targetRectangle":{"y":551,
"width":1023,
"x":0.0614624,
"height":42}
,
"text":"➞ Modèle trop simple, ne permet pas les abonnements multi-utilisateurs"}
]
}
,{"note":"slide-7",
"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s7.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s7.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s7.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s7.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s7.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s7.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":338,
"x":343,
"height":77}
,
"text":"Modèle revu"}
,{"targetRectangle":{"y":246.5,
"width":869,
"x":100,
"height":339}
,
"text":"class Subscription(models.Model):\n    \"\"\"A subscription used by several customers\"\"\"\n    start_date = models.DateField()\n    end_date = models.DateTimeField()\n\n\nclass Subscriber(models.Model):\n    \"\"\"A link between a customer and a subscription\"\"\"\n    customer = models.ForeignKey(Customer)\n    subscription = models.ForeignKey(Subscription)\n"}
]
}
,{"note":"slide-8",
"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s8.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s8.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s8.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s8.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s8.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s8.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":350,
"x":337,
"height":77}
,
"text":"La migration"}
,{"targetRectangle":{"y":184,
"width":871,
"x":100,
"height":399}
,
"text":"class Migration(SchemaMigration):\n    def forwards(self, orm):\n\n        # Deleting field 'Subscription.customer'\n        db.delete_column('subscription', 'customer_id')\n        \n        # Adding model 'Subscriber'\n        db.create_table('subscriber', (\n            ('id', ...),\n            ('customer',...),\n            ('subscription', ...),\n        ))\n"}
,{"targetRectangle":{"y":615,
"width":1023,
"x":0.0614624,
"height":42}
,
"text":"➞ Fichier de migration généré automatiquement par South"}
]
}
,{"note":"slide-9",
"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s9.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s9.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s9.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s9.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s9.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s9.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":262,
"x":381,
"height":77}
,
"text":"Problème"}
,{"targetRectangle":{"y":284,
"width":734,
"x":156,
"height":119}
,
"text":"La base de données migrée n’est pas compatible avec la première version du code"}
,{"targetRectangle":{"y":403,
"width":664,
"x":156,
"height":119}
,
"text":"La base de données non migrée n’est pas compatible avec la nouvelle version du code"}
,{"targetRectangle":{"y":522,
"width":652,
"x":156,
"height":86}
,
"text":"Migration impossible sans incidence sur le service."}
]
}
,{"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s10.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s10.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s10.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s10.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s10.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s10.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":306,
"x":359,
"height":77}
,
"text":"Alternative"}
,{"targetRectangle":{"y":365,
"width":705,
"x":156,
"height":76}
,
"text":"Il faut envisager un autre schéma de migration"}
,{"targetRectangle":{"y":441,
"width":736,
"x":156,
"height":86}
,
"text":"Pour cela, on introduit un modèle intermédiaire compatible avec les deux versions du code"}
]
}
,{"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s11.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s11.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s11.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s11.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s11.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s11.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":588,
"x":218,
"height":77}
,
"text":"Modèle intermédiaire"}
,{"targetRectangle":{"y":261,
"width":874,
"x":100,
"height":369}
,
"text":"class Subscription(models.Model):\n    \"\"\"A subscription used by several customers\"\"\"\n    customer = models.ForeignKey(Customer, null=True)\n    start_date = models.DateField()\n    end_date = models.DateTimeField()\n\n\nclass Subscriber(models.Model):\n    \"\"\"A link between a customer and a subscription\"\"\"\n    customer = models.ForeignKey(Customer)\n    subscription = models.ForeignKey(Subscription)\n"}
]
}
,{"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s12.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s12.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s12.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s12.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s12.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s12.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":400,
"x":312,
"height":77}
,
"text":"Les migrations"}
,{"targetRectangle":{"y":284,
"width":520,
"x":133,
"height":76}
,
"text":"Deux migrations South à générer :"}
,{"targetRectangle":{"y":360,
"width":712,
"x":196,
"height":162}
,
"text":"0008_auto_chg_field_customer_add_subscriber.py : migration du premier modèle au modèle intermédiaire"}
,{"targetRectangle":{"y":522,
"width":701,
"x":196,
"height":86}
,
"text":"0009_auto_del_field_customer.py : migration du modèle intermédiaire au modèle cible"}
]
}
,{"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s13.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s13.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s13.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s13.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s13.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s13.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":360,
"x":332,
"height":77}
,
"text":"Déploiement"}
,{"targetRectangle":{"y":230,
"width":500,
"x":133,
"height":76}
,
"text":"Le plan de déploiement devient :"}
,{"targetRectangle":{"y":306,
"width":419,
"x":199,
"height":76}
,
"text":"Jouer la première migration"}
,{"targetRectangle":{"y":382,
"width":695,
"x":196,
"height":119}
,
"text":"Migrer les données de l’ancien modèle vers le second"}
,{"targetRectangle":{"y":501,
"width":618,
"x":196,
"height":119}
,
"text":"Déployer la nouvelle version sur tous les serveurs"}
,{"targetRectangle":{"y":620,
"width":405,
"x":199,
"height":43}
,
"text":"Jouer la seconde migration"}
]
}
,{"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s14.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s14.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s14.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s14.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s14.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s14.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":358,
"x":333,
"height":77}
,
"text":"Complément"}
,{"targetRectangle":{"y":284,
"width":598,
"x":133,
"height":119}
,
"text":"Comment jouer les migrations avant le déploiement ?"}
,{"targetRectangle":{"y":403,
"width":580,
"x":237,
"height":119}
,
"text":"Déploiement préalable sur un serveur (temporairement) dédié"}
,{"targetRectangle":{"y":522,
"width":594,
"x":237,
"height":86}
,
"text":"Ne pas relancer les serveurs applicatifs immédiatement"}
]
}
,{"note":"slide-15",
"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s15.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s15.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s15.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s15.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s15.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s15.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":694,
"x":165,
"height":77}
,
"text":"Deux types de migrations"}
,{"targetRectangle":{"y":300,
"width":710,
"x":196,
"height":162}
,
"text":"Ajout de modèles, ajout de champs facultatifs, relaxation de contraintes, etc. : base migrée compatible avec l’ancienne version du code"}
,{"targetRectangle":{"y":462,
"width":666,
"x":196,
"height":129}
,
"text":"Suppression de champs, suppression de modèles, ajouts de contraintes, etc. : non nécessaires pour la nouvelle version du code"}
]
}
,{"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s16.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s16.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s16.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s16.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s16.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s16.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":410,
"x":307,
"height":77}
,
"text":"Cas non traités"}
,{"targetRectangle":{"y":348,
"width":330,
"x":196,
"height":76}
,
"text":"Renommer un champ"}
,{"targetRectangle":{"y":424,
"width":320,
"x":196,
"height":76}
,
"text":"Renommer une table"}
,{"targetRectangle":{"y":500,
"width":328,
"x":196,
"height":43}
,
"text":"À gérer au cas par cas"}
]
}
,{"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s17.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s17.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s17.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s17.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s17.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s17.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":260,
"x":382,
"height":77}
,
"text":"Les index"}
,{"targetRectangle":{"y":246,
"width":703,
"x":156,
"height":119}
,
"text":"Peuvent accélérer considérablement certaines requêtes"}
,{"targetRectangle":{"y":365,
"width":431,
"x":156,
"height":76}
,
"text":"Parfois très coûteux à créer :"}
,{"targetRectangle":{"y":441,
"width":703,
"x":196,
"height":119}
,
"text":"En général, création d’un arbre regroupant les entrées de la table"}
,{"targetRectangle":{"y":560,
"width":689,
"x":196,
"height":86}
,
"text":"Par défaut, la table indexée est verrouillée en écriture tout au long de l’opération"}
]
}
,{"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s18.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s18.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s18.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s18.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s18.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s18.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":284,
"x":370,
"height":77}
,
"text":"Le modèle"}
,{"targetRectangle":{"y":229.5,
"width":880,
"x":100,
"height":308}
,
"text":"class Subscriber(models.Model):\n    \"\"\"A link between a customer and a subscription\"\"\"\n    customer = models.ForeignKey(Customer)\n    subscription = models.ForeignKey(Subscription)\n\nclass Rental(models.Model):\n    \"\"\"A rental made by a subscriber\"\"\"\n    subscriber = models.ForeignKey(Subscriber)\n    start_at = models.DateTimeField()\n    end_at = models.DateTimeField(null=True)"}
]
}
,{"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s19.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s19.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s19.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s19.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s19.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s19.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":452,
"x":286,
"height":77}
,
"text":"Ajout d’un index"}
,{"targetRectangle":{"y":321,
"width":642,
"x":168,
"height":43}
,
"text":"Reporting sur les locations de la semaine :\u2028"}
,{"targetRectangle":{"y":440,
"width":584,
"x":168,
"height":43}
,
"text":"Trop long, nécessite d’ajouter un index"}
,{"targetRectangle":{"y":386,
"width":682.0928,
"x":192,
"height":69}
,
"text":"Rental.objects.filter(start__gte=last_week)\n"}
]
}
,{"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s20.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s20.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s20.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s20.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s20.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s20.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":452,
"x":286,
"height":77}
,
"text":"Ajout d’un index"}
,{"targetRectangle":{"y":229.5,
"width":867,
"x":100,
"height":308}
,
"text":"class Subscriber(models.Model):\n    \"\"\"A link between a customer and a subscription\"\"\"\n    customer = models.ForeignKey(Customer)\n    subscription = models.ForeignKey(Subscription)\n\nclass Rental(models.Model):\n    \"\"\"A rental made by a subscriber\"\"\"\n    subscriber = models.ForeignKey(Subscriber)\n    start_at = models.DateTimeField(db_index=True)\n    end_at = models.DateTimeField(null=True)"}
]
}
,{"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s21.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s21.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s21.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s21.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s21.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s21.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":452,
"x":286,
"height":77}
,
"text":"Ajout d’un index"}
,{"targetRectangle":{"y":289,
"width":845,
"x":100,
"height":189}
,
"text":"class Migration(SchemaMigration):\n\n    def forwards(self, orm):\n        # Adding index on 'Rental', fields ['start']\n        db.create_index(u'rental', ['start'])\n"}
,{"targetRectangle":{"y":535,
"width":431.6035,
"x":295.7597,
"height":42}
,
"text":"➞ Création d’index gérée par South"}
]
}
,{"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s22.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s22.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s22.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s22.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s22.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s22.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":452,
"x":286,
"height":77}
,
"text":"Ajout d’un index"}
,{"targetRectangle":{"y":268,
"width":166,
"x":133,
"height":76}
,
"text":"Problème :"}
,{"targetRectangle":{"y":344,
"width":701,
"x":196,
"height":119}
,
"text":"Table avec beaucoup d’enregistrements (ex : 2 millions), opération longue (> minute)"}
,{"targetRectangle":{"y":463,
"width":724,
"x":196,
"height":119}
,
"text":"Durant ce temps, impossible d’insérer/modifier les enregistrements de la table"}
,{"targetRectangle":{"y":582,
"width":664,
"x":196,
"height":43}
,
"text":"Parfois impossible de démarrer la migration"}
]
}
,{"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s23.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s23.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s23.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s23.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s23.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s23.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":452,
"x":286,
"height":77}
,
"text":"Ajout d’un index"}
,{"targetRectangle":{"y":299,
"width":678,
"x":156,
"height":208}
,
"text":"L’ajout d’index peut se faire sans verrou avec PostgreSQL :\u2028\u2028CREATE INDEX CONCURRENTLY rental_start ON rental(start);"}
,{"targetRectangle":{"y":507,
"width":600,
"x":156,
"height":86}
,
"text":"Ajout manuel, car incompatible avec le comportement transactionnel de South"}
]
}
,{"automaticPlay":false,
"hyperlinks":[]
,
"eventInitialStates":[{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s24.b",
"hidden":0}
,{"opacity":1,
"affineTransform":[1,0,0,1,0,0]
,
"texture":"s24.a",
"hidden":0}
]
,
"eventAnimations":[{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":1}
,
"action":"hidden",
"texture":"s24.a",
"to":{"scalar":1}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s24.a"]
}
,{"effect":"none",
"actions":[{"beginTime":0,
"from":{"scalar":0}
,
"action":"hidden",
"texture":"s24.b",
"to":{"scalar":0}
,
"timingFunction":"linear",
"duration":0.001}
]
,
"duration":0.001,
"animationType":"transition",
"beginTime":0,
"textures":["s24.b"]
}
]
,
"textRegions":[{"targetRectangle":{"y":71,
"width":308,
"x":358,
"height":77}
,
"text":"Conclusion"}
,{"targetRectangle":{"y":284,
"width":621,
"x":156,
"height":119}
,
"text":"Plupart des cas de migration de données réalisables sans coupure du service"}
,{"targetRectangle":{"y":403,
"width":756,
"x":156,
"height":119}
,
"text":"Nécessite une organisation en amont (ex : review, classification des migrations, test en local)"}
,{"targetRectangle":{"y":522,
"width":764,
"x":156,
"height":86}
,
"text":"South : outil très pratique, mais qui ne remplacera pas cette analyse"}
]
}
]
,
"loopSlideshow":0,
"showMode":0,
"majorVersion":0,
"notes":{"slide-8":"- Explications sur le fonctionnement de South (fichiers générés, table d’historique des migrations)",
"slide-7":"- Description rapide du second modèle : un abonnement peut être relié à plusieurs clients grâce à une table de jointure\n- Pour simplification, nous ne mentionnons pas la contrainte d’unicité sur le couple (customer, subscription)",
"slide-6":"- Description rapide du modèle :\n\t- Un compte client (volontairement simple)\n\t- Un abonnement rattaché à un client",
"slide-4":"- Rapide rappel au cas où des gens ne connaitraient pas Django",
"slide-3":"Présentation rapide de south.\nLa présentation se concentre sur un système django/postgres avec des migrations gérées par South.\nLes idées développées peuvent se généraliser indépendamment du SGBD et du framework (même en raw SQL)",
"slide-2":"Plein de raisons pour ne pas pouvoir se permettre d’indisponibilité :\n\t- engagement de QOS\n\t- image\n\t- etc.",
"slide-1":"Bonjour, présentation, etc.",
"slide-15":"Parenthèse sur l’ajout de champs: facultatifs pour ne pas réécrire la table, script de remplissage intermédiaire.",
"slide-9":"- Expliquer brièvement ce qui détermine si une migration doit passer avant ou après la mise à jour du code."}
,
"creator":"Apple Keynote 5.3",
"author":"",
"comment":"",
"pageCount":24,
"scalefactor480":0.3310547,
"slideCount":24}
